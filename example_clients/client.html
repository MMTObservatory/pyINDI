<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="apple-touch-icon" sizes="180x180" href="/indi/static/favicon/apple-touch-icon.png">
		<link rel="shortcut icon" type="image/png" sizes="32x32" href="">
		<link rel="shortcut icon" type="image/png" sizes="16x16" href="/indi/static/favicon/favicon-16x16.png">
		<link rel="manifest" href="/indi/static/favicon/site.webmanifest">
		<title>pyINDI</title>
		<!-- Load pyINDI scripts -->
		<script src="/indi/static/indi.js"></script>
		<script src="/indi/static/utility.js"></script>
		<script src="/indi/static/maps-indi.js"></script>
		<!-- Load pyINDI styling -->
		<link rel="stylesheet" href="/indi/static/indi.css">
		<script>
			const main = () => {
				/* Runs on load
				
				Description
				-----------
				Builds with default properties using below callback. Change
				to modify the callbacks.

				Arguments
				---------
				None

				Returns
				-------
				None
				*/
				start = new Date()
				imgs = []

				setPropertyCallback( "{{ device_name }}.*", handleProperty );
			}

			const handleProperty = (INDIvp) => {
				/* Handles incoming indi

				Description
				-----------
				This function will be called whenever an INDI property with the device 
				{{ device_name }} is received. This is where users should modify the
				code to append to specific objects.

				Arguments
				---------
				INDIvp   : Object that contains all information about the indi property

				Returns
				-------
				None
				*/
				// If definition, create new group and device if needed
				if (INDIvp.op === "def") {
					var device = newDevice(INDIvp);
					var group = newGroup(INDIvp);
				}
				
				switch (INDIvp.metainfo) {
					case "nvp":
						ele = newNumber(INDIvp);
					break;
					case "svp":
						ele = newSwitch(INDIvp);
					break;
					case "tvp":
						ele = newText(INDIvp);
					break;
					case "lvp":
						ele = newLight(INDIvp);
					break;
					default:
				}

				return;
			}
		</script>
	</head>
	<body onload=main()>
		<!-- Use this area to build custom GUIs and map in callback -->
	</body>
</html>

