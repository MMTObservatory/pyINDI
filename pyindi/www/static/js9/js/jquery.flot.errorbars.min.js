(function(w){function D(c,b,f,k){if(b.points.errorbars){c=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}];f=b.points.errorbars;if("x"==f||"xy"==f)b.points.xerr.asymmetric&&c.push({x:!0,number:!0,required:!0}),c.push({x:!0,number:!0,required:!0});if("y"==f||"xy"==f)b.points.yerr.asymmetric&&c.push({y:!0,number:!0,required:!0}),c.push({y:!0,number:!0,required:!0});k.format=c}}function A(c,b,f,k,e,u,h,B,a,C,n){k+=C;e+=C;u+=C;"x"==b.err?(e>f+a?v(c,[[e,k],[Math.max(f+a,n[0]),k]]):h=!1,u<f-
a?v(c,[[Math.min(f-a,n[1]),k],[u,k]]):B=!1):(e<k-a?v(c,[[f,e],[f,Math.min(k-a,n[0])]]):h=!1,u>k+a?v(c,[[f,Math.max(k+a,n[1])],[f,u]]):B=!1);a=null!=b.radius?b.radius:a;h&&("-"==b.upperCap?"x"==b.err?v(c,[[e,k-a],[e,k+a]]):v(c,[[f-a,e],[f+a,e]]):w.isFunction(b.upperCap)&&("x"==b.err?b.upperCap(c,e,k,a):b.upperCap(c,f,e,a)));B&&("-"==b.lowerCap?"x"==b.err?v(c,[[u,k-a],[u,k+a]]):v(c,[[f-a,u],[f+a,u]]):w.isFunction(b.lowerCap)&&("x"==b.err?b.lowerCap(c,u,k,a):b.lowerCap(c,f,u,a)))}function v(c,b){c.beginPath();
c.moveTo(b[0][0],b[0][1]);for(var f=1;f<b.length;f++)c.lineTo(b[f][0],b[f][1]);c.stroke()}function E(c,b){var f=c.getPlotOffset();b.save();b.translate(f.left,f.top);w.each(c.getData(),function(c,e){if(e.points.errorbars&&(e.points.xerr.show||e.points.yerr.show)){c=e.datapoints.points;var f=e.datapoints.pointsize,h=[e.xaxis,e.yaxis],k=e.points.radius,a=[e.points.xerr,e.points.yerr],v=!1;if(h[0].p2c(h[0].max)<h[0].p2c(h[0].min)){v=!0;var n=a[0].lowerCap;a[0].lowerCap=a[0].upperCap;a[0].upperCap=n}var w=
!1;h[1].p2c(h[1].min)<h[1].p2c(h[1].max)&&(w=!0,n=a[1].lowerCap,a[1].lowerCap=a[1].upperCap,a[1].upperCap=n);for(var p=0;p<e.datapoints.points.length;p+=f){var d=e.datapoints.points,q=null,r=null,l=null,m=null;var x=e.points.xerr;var g=e.points.yerr,t=e.points.errorbars;"x"==t||"xy"==t?x.asymmetric?(q=d[p+2],r=d[p+3],"xy"==t&&(g.asymmetric?(l=d[p+4],m=d[p+5]):l=d[p+4])):(q=d[p+2],"xy"==t&&(g.asymmetric?(l=d[p+3],m=d[p+4]):l=d[p+3])):"y"==t&&(g.asymmetric?(l=d[p+2],m=d[p+3]):l=d[p+2]);null==r&&(r=
q);null==m&&(m=l);d=[q,r,l,m];x.show||(d[0]=null,d[1]=null);g.show||(d[2]=null,d[3]=null);x=d;for(g=0;g<a.length;g++)if(d=[h[g].min,h[g].max],x[g*a.length]&&(q=c[p],r=c[p+1],l=[q,r][g]+x[g*a.length+1],m=[q,r][g]-x[g*a.length],"x"!=a[g].err||!(r>h[1].max||r<h[1].min||l<h[0].min||m>h[0].max)))if("y"!=a[g].err||!(q>h[0].max||q<h[0].min||l<h[1].min||m>h[1].max)){var y=t=!0;l>d[1]&&(t=!1,l=d[1]);m<d[0]&&(y=!1,m=d[0]);if("x"==a[g].err&&v||"y"==a[g].err&&w)n=m,m=l,l=n,n=y,y=t,t=n,n=d[0],d[0]=d[1],d[1]=n;
q=h[0].p2c(q);r=h[1].p2c(r);l=h[g].p2c(l);m=h[g].p2c(m);d[0]=h[g].p2c(d[0]);d[1]=h[g].p2c(d[1]);n=a[g].lineWidth?a[g].lineWidth:e.points.lineWidth;var z=null!=e.points.shadowSize?e.points.shadowSize:e.shadowSize;0<n&&0<z&&(z/=2,b.lineWidth=z,b.strokeStyle="rgba(0,0,0,0.1)",A(b,a[g],q,r,l,m,t,y,k,z+z/2,d),b.strokeStyle="rgba(0,0,0,0.2)",A(b,a[g],q,r,l,m,t,y,k,z/2,d));b.strokeStyle=a[g].color?a[g].color:e.color;b.lineWidth=n;A(b,a[g],q,r,l,m,t,y,k,0,d)}}}});b.restore()}w.plot.plugins.push({init:function(c){c.hooks.processRawData.push(D);
c.hooks.draw.push(E)},options:{series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}},name:"errorbars",version:"1.0"})})(jQuery);
