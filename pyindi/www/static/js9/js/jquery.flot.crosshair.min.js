(function(h){h.plot.plugins.push({init:function(a){function e(c){d.locked||-1==d.x||(d.x=-1,a.triggerRedrawOverlay())}function g(c){if(!d.locked)if(a.getSelection&&a.getSelection())d.x=-1;else{var b=a.offset();d.x=Math.max(0,Math.min(c.pageX-b.left,a.width()));d.y=Math.max(0,Math.min(c.pageY-b.top,a.height()));a.triggerRedrawOverlay()}}var d={x:-1,y:-1,locked:!1};a.setCrosshair=function(c){c?(c=a.p2c(c),d.x=Math.max(0,Math.min(c.left,a.width())),d.y=Math.max(0,Math.min(c.top,a.height()))):d.x=-1;
a.triggerRedrawOverlay()};a.clearCrosshair=a.setCrosshair;a.lockCrosshair=function(c){c&&a.setCrosshair(c);d.locked=!0};a.unlockCrosshair=function(){d.locked=!1};a.hooks.bindEvents.push(function(c,b){c.getOptions().crosshair.mode&&(b.mouseout(e),b.mousemove(g))});a.hooks.drawOverlay.push(function(c,b){var a=c.getOptions().crosshair;if(a.mode){var f=c.getPlotOffset();b.save();b.translate(f.left,f.top);if(-1!=d.x){f=c.getOptions().crosshair.lineWidth%2?.5:0;b.strokeStyle=a.color;b.lineWidth=a.lineWidth;
b.lineJoin="round";b.beginPath();if(-1!=a.mode.indexOf("x")){var e=Math.floor(d.x)+f;b.moveTo(e,0);b.lineTo(e,c.height())}-1!=a.mode.indexOf("y")&&(a=Math.floor(d.y)+f,b.moveTo(0,a),b.lineTo(c.width(),a));b.stroke()}b.restore()}});a.hooks.shutdown.push(function(a,b){b.unbind("mouseout",e);b.unbind("mousemove",g)})},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})})(jQuery);
