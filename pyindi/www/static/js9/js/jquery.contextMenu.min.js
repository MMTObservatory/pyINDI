var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,n,r){c instanceof String&&(c=String(c));for(var t=c.length,u=0;u<t;u++){var m=c[u];if(n.call(r,m,u,c))return{i:u,v:m}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,n,r){c!=Array.prototype&&c!=Object.prototype&&(c[n]=r.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,n,r,t){if(n){r=$jscomp.global;c=c.split(".");for(t=0;t<c.length-1;t++){var u=c[t];u in r||(r[u]={});r=r[u]}c=c[c.length-1];t=r[c];n=n(t);n!=t&&null!=n&&$jscomp.defineProperty(r,c,{configurable:!0,writable:!0,value:n})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,r){return $jscomp.findInternal(this,c,r).v}},"es6","es3");
(function(c,n){function r(b){b=b.split(/\s+/);for(var a=[],e=0,f;f=b[e];e++)f=f.charAt(0).toUpperCase(),a.push(f);return a}function t(b){return b.id&&c('label[for="'+b.id+'"]').val()||b.name}function u(b,a,e){e||(e=0);a.each(function(){var a=c(this),d=this,k=this.nodeName.toLowerCase();if("label"===k&&a.find("input, textarea, select").length){var g=a.text();a=a.children().first();d=a.get(0);k=d.nodeName.toLowerCase()}switch(k){case "menu":var h={name:a.attr("label"),items:{}};e=u(h.items,a.children(),
e);break;case "a":case "button":h={name:a.text(),disabled:!!a.attr("disabled"),callback:function(){return function(){a.get(0).click()}}()};break;case "menuitem":case "command":switch(a.attr("type")){case n:case "command":case "menuitem":h={name:a.attr("label"),disabled:!!a.attr("disabled"),icon:a.attr("icon"),callback:function(){return function(){a.get(0).click()}}()};break;case "checkbox":h={type:"checkbox",disabled:!!a.attr("disabled"),name:a.attr("label"),selected:!!a.attr("checked")};break;case "radio":h=
{type:"radio",disabled:!!a.attr("disabled"),name:a.attr("label"),radio:a.attr("radiogroup"),value:a.attr("id"),selected:!!a.attr("checked")};break;default:h=n}break;case "hr":h="-------";break;case "input":switch(a.attr("type")){case "text":h={type:"text",name:g||t(d),disabled:!!a.attr("disabled"),value:a.val()};break;case "checkbox":h={type:"checkbox",name:g||t(d),disabled:!!a.attr("disabled"),selected:!!a.attr("checked")};break;case "radio":h={type:"radio",name:g||t(d),disabled:!!a.attr("disabled"),
radio:!!a.attr("name"),value:a.val(),selected:!!a.attr("checked")};break;default:h=n}break;case "select":h={type:"select",name:g||t(d),disabled:!!a.attr("disabled"),selected:a.val(),options:{}};a.children().each(function(){h.options[this.value]=c(this).text()});break;case "textarea":h={type:"textarea",name:g||t(d),disabled:!!a.attr("disabled"),value:a.val()};break;case "label":break;default:h={type:"html",html:a.clone(!0)}}h&&(e++,b["key"+e]=h)});return e}c.support.htmlMenuitem="HTMLMenuItemElement"in
window;c.support.htmlCommand="HTMLCommandElement"in window;c.support.eventSelectstart="onselectstart"in document.documentElement;c.ui&&c.widget||(c.cleanData=function(b){return function(a){var e,f;for(f=0;null!=a[f];f++){var d=a[f];try{(e=c._data(d,"events"))&&e.remove&&c(d).triggerHandler("remove")}catch(k){}}b(a)}}(c.cleanData));var m=null,z=!1,v=c(window),A=0,w={},q={},B={},C={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,
classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(b){if(c.ui&&c.ui.position)b.css("display",
"block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var a=this.offset();a.top+=this.outerHeight();a.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(a)}},position:function(b,a,e){if(a||e){if("maintain"===a&&"maintain"===e)a=b.$menu.position();else{var c=b.$menu.offsetParent().offset();a={top:e-c.top,left:a-c.left}}e=v.scrollTop()+v.height();c=v.scrollLeft()+v.width();var d=b.$menu.outerHeight(),k=b.$menu.outerWidth();a.top+d>e&&(a.top-=
d);0>a.top&&(a.top=0);a.left+k>c&&(a.left-=k);0>a.left&&(a.left=0);b.$menu.css(a)}else b.determinePosition.call(this,b.$menu)},positionSubmenu:function(b){if("undefined"!==typeof b)if(c.ui&&c.ui.position)b.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var a={top:-9,left:this.outerWidth()-5};b.css(a)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{preShow:c.noop,show:c.noop,hide:c.noop,activated:c.noop},
callback:null,items:{}},y=null,D=null,E=null,F,G=function(b){for(var a=0;a=Math.max(a,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return a},l={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},contextmenu:function(b){var a=c(this);if(!1!==b.data.events.preShow(a,b)&&("right"===b.data.trigger&&(b.preventDefault(),b.stopImmediatePropagation()),!("right"!==b.data.trigger&&"demand"!==b.data.trigger&&b.originalEvent||
"undefined"!==typeof b.mouseButton&&b.data&&!("left"===b.data.trigger&&0===b.mouseButton||"right"===b.data.trigger&&2===b.mouseButton)||a.hasClass("context-menu-active")||a.hasClass("context-menu-disabled")))){m=a;if(b.data.build){var e=b.data.build(m,b);if(!1===e)return;b.data=c.extend(!0,{},C,b.data,e||{});if(!b.data.items||c.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=
m;p.create(b.data)}p.show.call(a,b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();c(this).trigger(c.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var a=c(this);m&&m.length&&!m.is(a)&&m.data("contextMenu").$menu.trigger("contextmenu:hide");2===b.button&&(m=a.data("contextMenuActive",!0))},mouseup:function(b){var a=c(this);a.data("contextMenuActive")&&m&&m.length&&m.is(a)&&!a.hasClass("context-menu-disabled")&&(b.preventDefault(),
b.stopImmediatePropagation(),m=a,a.trigger(c.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));a.removeData("contextMenuActive")},mouseenter:function(b){var a=c(this),e=c(b.relatedTarget),f=c(document);e.is(".context-menu-list")||e.closest(".context-menu-list").length||m&&m.length||(D=b.pageX,E=b.pageY,F=b.data,f.on("mousemove.contextMenuShow",l.mousemove),y=setTimeout(function(){y=null;f.off("mousemove.contextMenuShow");m=a;a.trigger(c.Event("contextmenu",{data:F,pageX:D,pageY:E}))},
b.data.delay))},mousemove:function(b){D=b.pageX;E=b.pageY},mouseleave:function(b){b=c(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(y)}catch(a){}y=null}},layerClick:function(b){var a=c(this).data("contextMenuRoot"),e=b.button,f=b.pageX,d=b.pageY,k=f===n,g,h;b.preventDefault();setTimeout(function(){if(k)null!==a&&"undefined"!==typeof a&&null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("contextmenu:hide");else{var l="left"===
a.trigger&&0===e||"right"===a.trigger&&2===e;if(document.elementFromPoint&&a.$layer){a.$layer.hide();g=document.elementFromPoint(f-v.scrollLeft(),d-v.scrollTop());if(g.isContentEditable){var m=document.createRange();var x=window.getSelection();m.selectNode(g);m.collapse(!0);x.removeAllRanges();x.addRange(m)}c(g).trigger(b);a.$layer.show()}if(a.hideOnSecondTrigger&&l&&null!==a.$menu&&"undefined"!==typeof a.$menu)a.$menu.trigger("contextmenu:hide");else{if(a.reposition&&l)if(document.elementFromPoint){if(a.$trigger.is(g)){a.position.call(a.$trigger,
a,f,d);return}}else if(h=a.$trigger.offset(),m=c(window),h.top+=m.scrollTop(),h.top<=b.pageY&&(h.left+=m.scrollLeft(),h.left<=b.pageX&&(h.bottom=h.top+a.$trigger.outerHeight(),h.bottom>=b.pageY&&(h.right=h.left+a.$trigger.outerWidth(),h.right>=b.pageX)))){a.position.call(a.$trigger,a,f,d);return}if(g&&l)a.$trigger.one("contextmenu:hidden",function(){c(g).contextMenu({x:f,y:d,button:e})});null!==a&&"undefined"!==typeof a&&null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("contextmenu:hide")}}},
50)},keyStop:function(b,a){a.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var a={};m&&(a=m.data("contextMenu")||{});"undefined"===typeof a.zIndex&&(a.zIndex=0);var c=0,f=function(a){""!==a.style.zIndex?c=a.style.zIndex:null!==a.offsetParent&&"undefined"!==typeof a.offsetParent?f(a.offsetParent):null!==a.parentElement&&"undefined"!==typeof a.parentElement&&f(a.parentElement)};f(b.target);if(!(a.$menu&&parseInt(c,10)>parseInt(a.$menu.css("zIndex"),10))){switch(b.keyCode){case 9:case 38:l.keyStop(b,
a);if(a.isInput){if(9===b.keyCode&&b.shiftKey){b.preventDefault();a.$selected&&a.$selected.find("input, textarea, select").blur();null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("prevcommand");return}if(38===b.keyCode&&"checkbox"===a.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!==b.keyCode||b.shiftKey){null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("prevcommand");return}break;case 40:l.keyStop(b,a);if(a.isInput){if(9===b.keyCode){b.preventDefault();
a.$selected&&a.$selected.find("input, textarea, select").blur();null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("nextcommand");return}if(40===b.keyCode&&"checkbox"===a.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("nextcommand");return}break;case 37:l.keyStop(b,a);if(a.isInput||!a.$selected||!a.$selected.length)break;if(!a.$selected.parent().hasClass("context-menu-root")){b=a.$selected.parent().parent();
a.$selected.trigger("contextmenu:blur");a.$selected=b;return}break;case 39:l.keyStop(b,a);if(a.isInput||!a.$selected||!a.$selected.length)break;var d=a.$selected.data("contextMenu")||{};if(d.$menu&&a.$selected.hasClass("context-menu-submenu")){a.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:a.$selected&&a.$selected.find("input, textarea, select").length||((a.$selected&&a.$selected.parent()||a.$menu).children(":not(."+a.classNames.disabled+", ."+a.classNames.notSelectable+
")")[36===b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:l.keyStop(b,a);if(a.isInput){if(a.$selected&&!a.$selected.is("textarea, select")){b.preventDefault();return}break}"undefined"!==typeof a.$selected&&null!==a.$selected&&a.$selected.trigger("mouseup");return;case 32:case 33:case 34:l.keyStop(b,a);return;case 27:l.keyStop(b,a);null!==a.$menu&&"undefined"!==typeof a.$menu&&a.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),
a.accesskeys&&a.accesskeys[d]){a.accesskeys[d].$node.trigger(a.accesskeys[d].$menu?"contextmenu:focus":"mouseup");return}}b.stopPropagation();"undefined"!==typeof a.$selected&&null!==a.$selected&&a.$selected.trigger(b)}},prevItem:function(b){b.stopPropagation();var a=c(this).data("contextMenu")||{},e=c(this).data("contextMenuRoot")||{};if(a.$selected){var f=a.$selected;a=a.$selected.parent().data("contextMenu")||{};a.$selected=f}f=a.$menu.children();for(var d=a.$selected&&a.$selected.prev().length?
a.$selected.prev():f.last(),k=d;d.hasClass(e.classNames.disabled)||d.hasClass(e.classNames.notSelectable)||d.is(":hidden");)if(d=d.prev().length?d.prev():f.last(),d.is(k))return;a.$selected&&l.itemMouseleave.call(a.$selected.get(0),b);l.itemMouseenter.call(d.get(0),b);b=d.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var a=c(this).data("contextMenu")||{},e=c(this).data("contextMenuRoot")||{};if(a.$selected){var f=a.$selected;a=a.$selected.parent().data("contextMenu")||
{};a.$selected=f}f=a.$menu.children();for(var d=a.$selected&&a.$selected.next().length?a.$selected.next():f.first(),k=d;d.hasClass(e.classNames.disabled)||d.hasClass(e.classNames.notSelectable)||d.is(":hidden");)if(d=d.next().length?d.next():f.first(),d.is(k))return;a.$selected&&l.itemMouseleave.call(a.$selected.get(0),b);l.itemMouseenter.call(d.get(0),b);b=d.find("input, textarea, select");b.length&&b.focus()},focusInput:function(){var b=c(this).closest(".context-menu-item"),a=b.data(),e=a.contextMenu;
a=a.contextMenuRoot;a.$selected=e.$selected=b;a.isInput=e.isInput=!0},blurInput:function(){var b=c(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(){c(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var a=c(this).data().contextMenuRoot;a.$layer&&a.$layer.is(b.relatedTarget)&&(a.hovering=!1)},itemMouseenter:function(b){var a=c(this),e=a.data(),f=e.contextMenu;e=e.contextMenuRoot;e.hovering=!0;b&&e.$layer&&e.$layer.is(b.relatedTarget)&&
(b.preventDefault(),b.stopImmediatePropagation());(f.$menu?f:e).$menu.children("."+e.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur");a.hasClass(e.classNames.disabled)||a.hasClass(e.classNames.notSelectable)?f.$selected=null:a.trigger("contextmenu:focus")},itemMouseleave:function(b){var a=c(this),e=a.data(),f=e.contextMenu;e=e.contextMenuRoot;e!==f&&e.$layer&&e.$layer.is(b.relatedTarget)?("undefined"!==typeof e.$selected&&null!==e.$selected&&e.$selected.trigger("contextmenu:blur"),
b.preventDefault(),b.stopImmediatePropagation(),e.$selected=f.$selected=f.$node):f&&f.$menu&&f.$menu.hasClass("context-menu-visible")||a.trigger("contextmenu:blur")},itemClick:function(b){var a=c(this),e=a.data(),f=e.contextMenu,d=e.contextMenuRoot;e=e.contextMenuKey;if(!(!f.items[e]||a.is("."+d.classNames.disabled+", .context-menu-separator, ."+d.classNames.notSelectable)||a.is(".context-menu-submenu")&&!1===d.selectableSubMenu)){b.preventDefault();b.stopImmediatePropagation();if(c.isFunction(f.callbacks[e])&&
Object.prototype.hasOwnProperty.call(f.callbacks,e))a=f.callbacks[e];else if(c.isFunction(d.callback))a=d.callback;else return;!1!==a.call(d.$trigger,e,d,b)?d.$menu.trigger("contextmenu:hide"):d.$menu.parent().length&&p.update.call(d.$trigger,d)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,a){b=c(this).data("contextMenuRoot");p.hide.call(b.$trigger,b,a&&a.force)},focusItem:function(b){b.stopPropagation();b=c(this);var a=b.data(),e=a.contextMenu;a=a.contextMenuRoot;b.hasClass(a.classNames.disabled)||
b.hasClass(a.classNames.notSelectable)||(b.addClass([a.classNames.hover,a.classNames.visible].join(" ")).parent().find(".context-menu-item").not(b).removeClass(a.classNames.visible).filter("."+a.classNames.hover).trigger("contextmenu:blur"),e.$selected=a.$selected=b,e&&e.$node&&e.$node.hasClass("context-menu-submenu")&&e.$node.addClass(a.classNames.hover),e.$node&&a.positionSubmenu.call(e.$node,e.$menu))},blurItem:function(b){b.stopPropagation();b=c(this);var a=b.data(),e=a.contextMenu;a=a.contextMenuRoot;
e.autoHide&&b.removeClass(a.classNames.visible);b.removeClass(a.classNames.hover);e.$selected=null}},p={show:function(b,a,e){var f=c(this),d={};c("#context-menu-layer").trigger("mousedown");b.$trigger=f;if(!1===b.events.show.call(f,b))m=null;else if(!1===p.update.call(f,b))m=null;else if(b.position.call(f,b,a,e),b.zIndex&&(a=b.zIndex,"function"===typeof b.zIndex&&(a=b.zIndex.call(f,b)),d.zIndex=G(f)+a),p.layer.call(b.$menu,b,d.zIndex),b.$menu.find("ul").css("zIndex",d.zIndex+1),b.$menu.css(d)[b.animation.show](b.animation.duration,
function(){f.trigger("contextmenu:visible");p.activated(b);b.events.activated(b)}),f.data("contextMenu",b).addClass("context-menu-active"),c(document).off("keydown.contextMenu").on("keydown.contextMenu",l.key),b.autoHide)c(document).on("mousemove.contextMenuAutoHide",function(a){var d=f.offset();d.right=d.left+f.outerWidth();d.bottom=d.top+f.outerHeight();!b.$layer||b.hovering||a.pageX>=d.left&&a.pageX<=d.right&&a.pageY>=d.top&&a.pageY<=d.bottom||setTimeout(function(){b.hovering||null===b.$menu||
"undefined"===typeof b.$menu||b.$menu.trigger("contextmenu:hide")},50)})},hide:function(b,a){var e=c(this);b||(b=e.data("contextMenu")||{});if(a||!b.events||!1!==b.events.hide.call(e,b)){e.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(a){return function(){a.remove()}}(b.$layer),10);try{delete b.$layer}catch(f){b.$layer=null}}m=null;b.$menu.find("."+b.classNames.hover).trigger("contextmenu:blur");b.$selected=null;b.$menu.find("."+b.classNames.visible).removeClass(b.classNames.visible);
c(document).off(".contextMenuAutoHide").off("keydown.contextMenu");if(b.$menu)b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&(b.$menu.remove(),c.each(b,function(a){switch(a){case "ns":case "selector":case "build":case "trigger":return!0;default:b[a]=n;try{delete b[a]}catch(d){}return!0}}));setTimeout(function(){e.trigger("contextmenu:hidden")},10)})}},create:function(b,a){function e(a){var b=c("<span></span>");if(a._accesskey)a._beforeAccesskey&&b.append(document.createTextNode(a._beforeAccesskey)),
c("<span></span>").addClass("context-menu-accesskey").text(a._accesskey).appendTo(b),a._afterAccesskey&&b.append(document.createTextNode(a._afterAccesskey));else if(a.isHtmlName){if("undefined"!==typeof a.accesskey)throw Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");b.html(a.name)}else b.text(a.name);return b}"undefined"===typeof a&&(a=b);b.$menu=c('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:a});
c.each(["callbacks","commands","inputs"],function(c,d){b[d]={};a[d]||(a[d]={})});a.accesskeys||(a.accesskeys={});c.each(b.items,function(f,d){var k=c('<li class="context-menu-item"></li>').addClass(d.className||""),g=null,h=null;k.on("click",c.noop);if("string"===typeof d||"cm_separator"===d.type)d={type:"cm_seperator"};d.$node=k.data({contextMenu:b,contextMenuRoot:a,contextMenuKey:f});if("undefined"!==typeof d.accesskey)for(var m=r(d.accesskey),n=0,x;x=m[n];n++)if(!a.accesskeys[x]){a.accesskeys[x]=
d;if(m=d.name.match(new RegExp("^(.*?)("+x+")(.*)$","i")))d._beforeAccesskey=m[1],d._accesskey=m[2],d._afterAccesskey=m[3];break}if(d.type&&B[d.type])B[d.type].call(k,d,b,a),c.each([b,a],function(a,e){e.commands[f]=d;!c.isFunction(d.callback)||"undefined"!==typeof e.callbacks[f]&&"undefined"!==typeof b.type||(e.callbacks[f]=d.callback)});else{"cm_seperator"===d.type?k.addClass("context-menu-separator "+a.classNames.notSelectable):"html"===d.type?k.addClass("context-menu-html "+a.classNames.notSelectable):
"sub"!==d.type&&d.type?(g=c("<label></label>").appendTo(k),e(d).appendTo(g),k.addClass("context-menu-input"),b.hasTypes=!0,c.each([b,a],function(a,b){b.commands[f]=d;b.inputs[f]=d})):d.items&&(d.type="sub");switch(d.type){case "cm_seperator":break;case "text":h=c('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+f).val(d.value||"").appendTo(g);break;case "textarea":h=c('<textarea name=""></textarea>').attr("name","context-menu-input-"+f).val(d.value||"").appendTo(g);d.height&&
h.height(d.height);break;case "checkbox":h=c('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+f).val(d.value||"").prop("checked",!!d.selected).prependTo(g);break;case "radio":h=c('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+d.radio).val(d.value||"").prop("checked",!!d.selected).prependTo(g);break;case "select":h=c('<select name=""></select>').attr("name","context-menu-input-"+f).appendTo(g);d.options&&(c.each(d.options,function(a,b){c("<option></option>").val(a).text(b).appendTo(h)}),
h.val(d.selected));break;case "sub":e(d).appendTo(k);d.appendTo=d.$node;k.data("contextMenu",d).addClass("context-menu-submenu");d.callback=null;"function"===typeof d.items.then?p.processPromises(d,a,d.items):p.create(d,a);break;case "html":c(d.html).appendTo(k);break;default:c.each([b,a],function(a,e){e.commands[f]=d;!c.isFunction(d.callback)||"undefined"!==typeof e.callbacks[f]&&"undefined"!==typeof b.type||(e.callbacks[f]=d.callback)}),e(d).appendTo(k)}if(d.type&&"sub"!==d.type&&"html"!==d.type&&
"cm_seperator"!==d.type&&(h.on("focus",l.focusInput).on("blur",l.blurInput),d.events))h.on(d.events,b);d.icon&&(c.isFunction(d.icon)?d._icon=d.icon.call(this,this,k,f,d):"string"!==typeof d.icon||"fab "!==d.icon.substring(0,4)&&"fas "!==d.icon.substring(0,4)&&"far "!==d.icon.substring(0,4)&&"fal "!==d.icon.substring(0,4)?"string"===typeof d.icon&&"fa-"===d.icon.substring(0,3)?d._icon=a.classNames.icon+" "+a.classNames.icon+"--fa fa "+d.icon:d._icon=a.classNames.icon+" "+a.classNames.icon+"-"+d.icon:
(k.addClass(a.classNames.icon+" "+a.classNames.icon+"--fa5"),d._icon=c('<i class="'+d.icon+'"></i>')),"string"===typeof d._icon?k.addClass(d._icon):k.prepend(d._icon))}d.$input=h;d.$label=g;k.appendTo(b.$menu);if(!b.hasTypes&&c.support.eventSelectstart)k.on("selectstart.disableTextSelect",l.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||document.body)},resize:function(b,a){var e;b.css({position:"absolute",display:"block"});b.data("width",
(e=b.get(0)).getBoundingClientRect?Math.ceil(e.getBoundingClientRect().width):b.outerWidth()+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){p.resize(c(this),!0)});a||b.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return c(this).data("width")})},update:function(b,a){var e=this;"undefined"===typeof a&&(a=b,p.resize(b.$menu));var f=!1;b.$menu.children().each(function(){var d=c(this),k=d.data("contextMenuKey"),
g=b.items[k],h=c.isFunction(g.disabled)&&g.disabled.call(e,k,a)||!0===g.disabled,l;(l=c.isFunction(g.visible)?g.visible.call(e,k,a):"undefined"!==typeof g.visible?!0===g.visible:!0)&&(f=!0);d[l?"show":"hide"]();d[h?"addClass":"removeClass"](a.classNames.disabled);c.isFunction(g.icon)&&(d.removeClass(g._icon),k=g.icon.call(this,e,d,k,g),"string"===typeof k?d.addClass(k):d.prepend(k));if(g.type)switch(d.find("input, select, textarea").prop("disabled",h),g.type){case "text":case "textarea":g.$input.val(g.value||
"");break;case "checkbox":case "radio":g.$input.val(g.value||"").prop("checked",!!g.selected);break;case "select":g.$input.val((0===g.selected?"0":g.selected)||"")}g.$menu&&p.update.call(e,g,a)&&(f=!0)});return f},layer:function(b,a){b=b.$layer=c('<div id="context-menu-layer"></div>').css({height:v.height(),width:v.width(),display:"block",position:"fixed","z-index":a,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",
l.abortevent).on("mousedown",l.layerClick);"undefined"===typeof document.body.style.maxWidth&&b.css({position:"absolute",height:c(document).height()});return b},processPromises:function(b,a,e){function c(a,b,c){"undefined"===typeof c?(c={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"===typeof c&&(c={error:{name:c}});
d(a,b,c)}function d(a,b,d){"undefined"!==typeof b.$menu&&b.$menu.is(":visible")&&(a.$node.removeClass(b.classNames.iconLoadingClass),a.items=d,p.create(a,b,!0),p.update(a,b),b.positionSubmenu.call(a.$node,a.$menu))}b.$node.addClass(a.classNames.iconLoadingClass);e.then(function(a,b,e){"undefined"===typeof e&&c(n);d(a,b,e)}.bind(this,b,a),c.bind(this,b,a))},activated:function(b){b=b.$menu;var a=b.offset(),e=c(window).height(),f=c(window).scrollTop(),d=b.height();d>e?b.css({height:e+"px","overflow-x":"hidden",
"overflow-y":"auto",top:f+"px"}):(a.top<f||a.top+d>f+e)&&b.css({top:f+"px"})}};c.fn.contextMenu=function(b){var a=this;if(0<this.length)if("undefined"===typeof b)this.first().trigger("contextmenu");else if("undefined"!==typeof b.x&&"undefined"!==typeof b.y)this.first().trigger(c.Event("contextmenu",{pageX:b.x,pageY:b.y,mouseButton:b.button}));else if("hide"===b){var e=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;e&&e.trigger("contextmenu:hide")}else"destroy"===b?c.contextMenu("destroy",
{context:this}):c.isPlainObject(b)?(b.context=this,c.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");else c.each(q,function(){this.selector===a.selector&&(b.data=this,c.extend(b.data,{trigger:"demand"}))}),l.contextmenu.call(b.target,b);return this};c.contextMenu=function(b,a){"string"!==typeof b&&(a=b,b="create");"string"===typeof a?a={selector:a}:"undefined"===typeof a&&(a={});var e=c.extend(!0,{},C,a||{}),f=c(document),d=f,k=!1;e.context&&
e.context.length?(d=c(e.context).first(),e.context=d.get(0),k=!c(e.context).is(document)):e.context=document;switch(b){case "update":if(k)p.update(d);else for(var g in q)q.hasOwnProperty(g)&&p.update(q[g]);break;case "create":if(!e.selector)throw Error("No selector specified");if(e.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+e.selector+'" as it contains a reserved className');if(!e.build&&(!e.items||c.isEmptyObject(e.items)))throw Error("No Items specified");
A++;e.ns=".contextMenu"+A;k||(w[e.selector]=e.ns);q[e.ns]=e;e.trigger||(e.trigger="right");z||(b={"contextmenu:focus.contextMenu":l.focusItem,"contextmenu:blur.contextMenu":l.blurItem,"contextmenu.contextMenu":l.abortevent,"mouseenter.contextMenu":l.itemMouseenter,"mouseleave.contextMenu":l.itemMouseleave},b["click"===e.itemClickEvent?"click.contextMenu":"mouseup.contextMenu"]=l.itemClick,f.on({"contextmenu:hide.contextMenu":l.hideMenu,"prevcommand.contextMenu":l.prevItem,"nextcommand.contextMenu":l.nextItem,
"contextmenu.contextMenu":l.abortevent,"mouseenter.contextMenu":l.menuMouseenter,"mouseleave.contextMenu":l.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",l.inputClick).on(b,".context-menu-item"),z=!0);d.on("contextmenu"+e.ns,e.selector,e,l.contextmenu);if(k)d.on("remove"+e.ns,function(){c(this).contextMenu("destroy")});switch(e.trigger){case "hover":d.on("mouseenter"+e.ns,e.selector,e,l.mouseenter).on("mouseleave"+e.ns,e.selector,e,l.mouseleave);break;case "left":d.on("click"+
e.ns,e.selector,e,l.click);break;case "touchstart":d.on("touchstart"+e.ns,e.selector,e,l.click)}e.build||p.create(e);break;case "destroy":if(k){var h=e.context;c.each(q,function(a,b){if(!b||!c(h).is(b.selector))return!0;m=c(".context-menu-list").filter(":visible");m.length&&m.data().contextMenuRoot.$trigger.is(c(b.context).find(b.selector))&&m.trigger("contextmenu:hide",{force:!0});try{q[b.ns].$menu&&q[b.ns].$menu.remove(),delete q[b.ns]}catch(I){q[b.ns]=null}c(b.context).off(b.ns);return!0})}else if(!e.selector)f.off(".contextMenu .contextMenuAutoHide"),
c.each(q,function(a,b){c(b.context).off(b.ns)}),w={},q={},A=0,z=!1,c("#context-menu-layer, .context-menu-list").remove();else if(w[e.selector]){var m=c(".context-menu-list").filter(":visible");m.length&&m.data().contextMenuRoot.$trigger.is(e.selector)&&m.trigger("contextmenu:hide",{force:!0});try{q[w[e.selector]].$menu&&q[w[e.selector]].$menu.remove(),delete q[w[e.selector]]}catch(H){q[w[e.selector]]=null}f.off(w[e.selector])}break;case "html5":(!c.support.htmlCommand&&!c.support.htmlMenuitem||"boolean"===
typeof a&&a)&&c('menu[type="context"]').each(function(){this.id&&c.contextMenu({selector:"[contextmenu="+this.id+"]",items:c.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};c.contextMenu.setInputValues=function(b,a){"undefined"===typeof a&&(a={});c.each(b.inputs,function(b,c){switch(c.type){case "text":case "textarea":c.value=a[b]||"";break;case "checkbox":c.selected=a[b]?!0:!1;break;case "radio":c.selected=(a[c.radio]||"")===
c.value;break;case "select":c.selected=a[b]||""}})};c.contextMenu.getInputValues=function(b,a){"undefined"===typeof a&&(a={});c.each(b.inputs,function(b,c){switch(c.type){case "text":case "textarea":case "select":a[b]=c.$input.val();break;case "checkbox":a[b]=c.$input.prop("checked");break;case "radio":c.$input.prop("checked")&&(a[c.radio]=c.value)}});return a};c.contextMenu.fromMenu=function(b){b=c(b);var a={};u(a,b.children());return a};c.contextMenu.defaults=C;c.contextMenu.types=B;c.contextMenu.handle=
l;c.contextMenu.op=p;c.contextMenu.menus=q})(jQuery);
